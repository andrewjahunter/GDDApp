<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="../styles/jquery-ui-1.9.1.custom.min.css" rel="stylesheet" />
    <link href="../styles/app.css" rel="stylesheet" />
    <link href="../styles/gdc.mobile.min.css" rel="stylesheet" />
    <link href="../styles/jquery.mobile.structure-1.3.0.min.css" rel="stylesheet" />
    <script data-main="../scripts/app/appstart.min.js" src="../../scripts/libraries/require.js"></script>
</head>
<body style="background-color: #343131; color: white; font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif">
    <div data-role="page" id="pg_groupmembers" data-theme="a">

        <div data-role="panel" id="panelAddNewMember" data-position="right" data-display="overlay" data-theme="g">

            <script id="addnewmembers-template" type="text/html">
                <li >
                    <a data-bind="attr: {'data-id': id}" data-transition="slide">
                        <h5 data-bind='text: firstName + " " + lastName'></h5>
                        <div data-bind="html: email" style="font-size: x-small"></div>
                        <div data-bind="html: mobileNumber" style="font-size: x-small"></div>
                    </a>
                    <a data-role="button" href="#" data-bind="attr: {'data-id': id}" class="addGrpMember" data-position-to="window"></a>
                </li>
            </script>


            <div data-theme="g" style="padding: 2px">
                Search Person<a href="#addNewMemberPopupHelp" data-rel="popup" data-role="button" data-position-to="window" class="ui-icon-alt" data-inline="true" data-theme="h" data-transition="slideup" data-icon="info" data-iconpos="notext">Learn more</a>
            </div>

            <div data-role="popup" id="addNewMemberPopupHelp" data-overlay-theme="a" style="max-width: 400px;"
                class="ui-corner-all">
                <div data-role="header" data-theme="h" class="ui-corner-top">
                    <h1>Add Members</h1>
                </div>
                <div data-role="content" data-theme="a" class="ui-corner-bottom ui-content">

                    <p>
                        To look for a person in the database, simply <strong>type their name (or part of their name)</strong> into the text box provided. e.g. Type Rick Far to find
                        all people in the database whose first name starts with 'Rick' and whose surname starts with 'Far'. Click Search 
                    </p>

                    <p>From that list of results (if found) <strong>click the 'check' icon</strong> to add them to the group</p>
                    <p>
                        If no result is found it is most likely because the person you are looking for <strong>has not registered</strong> in the database or you
                        don't have the <strong>right permissions</strong> to view their account info. Either ask the person you to register in the database or request your
                        church office to elevate your permissions in the system.
                    </p>


                    <a href="#" data-role="button" data-theme="h" data-rel="back">Done!</a>

                </div>
            </div>


            <input id="txtNewMemberSearchString" placeholder="name..." value="" type="text" />

            <div class="ui-grid-a">
                <div class="ui-block-a">
                    <div data-role="button" data-theme="b" id="btnSearchNewMember" data-inline="true">search</div>
                </div>
                <div class="ui-block-b">
                    <div data-role="button" data-theme="a" data-rel="close" id="btnCloseSearchNewMember" data-inline="true">close</div>
                </div>
            </div>
        <a href="#sg_cantfind_members" data-rel="popup" data-transition="slideup" data-position-to="window"  data-role="button" data-theme="d">can't find person?</a>


            <ul data-role="listview" data-split-icon="check" data-split-theme="c" data-inset="true" data-theme="a" id="addNewMembersList" data-bind="template: { name: 'addnewmembers-template', foreach: newMembersResults}"></ul>


        </div>
        <div data-role="header">

            <a href="groupsmy.html" data-icon="back" data-transition="flip" data-direction="reverse" data-role="button" data-theme="b" data-iconpos="notext">back</a>
            <h1 class="pageHeader" data-bind="html:selectedGroup.groupName()">Group</h1>
            <a href="#" class="btnOpenAddGroupMemberPanel"   data-icon="plus" data-role="button" data-theme="b" >add</a>
            


        </div>
        <div data-role="content" style="padding: 15px">
            <div data-role="popup" class="ui-content" id="pg_groupmembers_errpopup" data-theme="e">
                <div id="pg_groupmembers_errpopmsg"></div>
            </div>


            <div id="grpActiveMembers" style="display: none">
                <script id="groupmembers-template" type="text/html">
                    <li data-role="list-divider">
                        <h5 data-bind="text: displayName"></h5>

                    </li>
                    <li>
                        <a data-bind="attr: {'data-id': id}" data-transition="slide">
                            <div data-bind="html: 'Email: ' + email" style="font-size: small"></div>
                            <div data-bind="html: 'Mobile: ' + mobileNumber" style="font-size: small"></div>
                            <div data-bind="html: 'Birthday: ' + birthday" style="font-size: small"></div>

                        </a>
                        <a data-role="button" data-bind="attr: {'data-id': id}" href="#" class="deactivategrpmember" data-position-to="window"></a>
                    </li>
                </script>


               

                <div id="grpActiveMembersListSection">
                    <div class="ui-bar ui-bar-h">
                        <div style="text-align:center">Active Members</div>
                    </div>
                    <div data-role="content" class="ui-body-h" style="text-align: center; font-size: small">
                       <div>These are all the Active members of this group. To De-Activate a member click on the 'X' next to their name.</div> 
                    <a id="btnGrpViewInActiveMembers" href="#">View In-Active Members</a>
                    </div>
                    

                    <ul data-role="listview" data-split-icon="delete" data-split-theme="e" data-inset="true" data-theme="b" class="membersListView" id="grpActiveMembersList" data-bind="template: { name: 'groupmembers-template', foreach: ko.utils.arrayFilter(selectedGroup.members(), function(itm){ return itm.isActive==true})}"></ul>
                
                <button data-role="button" data-theme="a" id="btnReloadMembers">Reload</button>
                </div>
                
                <div id="grpDeActivateMemberReason" style="display: none">
                    <div class="ui-bar ui-bar-h">
                        <div style="text-align:center">De-Activate Member</div>
                    </div>
                    <div data-role="content" class="ui-body-h">Please provide a reason why you are removing this person from the group</div>
                    <div data-role="fieldcontain">
                        <label for="ddlGrpMemDeActiveReason">
                            Reason                       
                        </label>
                        <select id="ddlGrpMemDeActiveReason" data-bind="options: refData.groupMembersInActiveReasons, optionsText:'reason',optionsValue:'id'">
                        </select>
                    </div>
                     <div data-role="fieldcontain">
                        <label for="grpMemDeActivateMoreInfo">
                            More Info
                        </label>
                        <input id="grpMemDeActivateMoreInfo" data-clear-btn="true"  placeholder="More info" type="text" />
                    </div>
                    <button data-theme="b" data-inline="true" id="btnGrpDeActivateMemGo">Remove</button>
                    <button data-theme="a" data-inline="true" id="btnGrpDeActivateMemCancel">Cancel</button>
                    <button data-theme="e"  id="btnDeleteMemberForever">Delete</button>

                </div>

                <div data-role="popup" id="memberDeletePopup" style="max-width: 400px;"
                     class="ui-corner-all">
                    <div data-role="header" data-theme="e" class="ui-corner-top">
                        <h1>Delete?</h1>
                        
                    </div>
                    <div data-role="content" data-theme="a" class="ui-corner-bottom ui-content">
                        <div class="ui-title" style="text-align: center; font-size: larger" data-bind="html:selectedGroupMember.displayName"></div>
                       
                        <p>
                            Are you sure you want to delete this member from the group? All data relating to this member will be lost forever?
                        </p>
                        <a href="#" data-role="button" data-inline="true" data-theme="e" id="btnMemberConfirmDelete">Delete</a>
                        <a href="#" data-role="button" data-rel="back" data-inline="true">Cancel</a>
                        <div class="ui-content" id="deleteGrpMemErr" data-theme="e" style="display:none">

                        </div>
                    </div>
                </div>


            </div>


            <div id="grpInActiveMembers" style="display: none">
                <script id="groupinactivemembers-template" type="text/html">
                    <li data-role="list-divider">
                        <h5 data-bind="text: displayName"></h5>

                    </li>
                    <li>
                        <a data-bind="attr: {'data-id': id}" data-transition="slide">
                            <div data-bind="html: 'Email: ' + email" style="font-size: small"></div>
                            <div data-bind="html: 'Mobile: ' + mobileNumber" style="font-size: small"></div>
                            <div data-bind="html: 'Birthday: ' + birthday" style="font-size: small"></div>
                            <div data-bind="html: 'Inactive Reason: ' + inActiveReason" style="font-size: small; white-space: normal"></div>
                            <div data-bind="html: 'More Info: ' + moreInfo" style="font-size: small; white-space: normal"></div>
                        </a>
                        <a data-role="button" data-bind="attr: {'data-id': id}" href="#" class="activategrpmember" data-position-to="window"></a>
                    </li>
                </script>
               

                <div class="ui-bar ui-bar-h">
                    <div style="text-align:center">In-Active Members</div>
                </div>

                 <div data-role="content" class="ui-body-h" style="text-align: center; font-size: small">
                       <div>These are all the In-Active members of this group. To activate a member click on the 'check' next to their name.</div> 
                    <a id="btnGrpViewActiveMembers" href="#">View Active Members</a>
                    </div>

                
                <ul data-role="listview" data-split-icon="check" data-split-theme="c" data-inset="true" data-theme="b" class="membersListView" id="grpInActiveMembersList" data-bind="template: { name: 'groupinactivemembers-template', foreach: ko.utils.arrayFilter(selectedGroup.members(), function(itm){ return itm.isActive==false})}"></ul>

            </div>

            <div id="grpNoMembers" style="display: none">

                <div data-role="header" data-theme="h" class="ui-corner-top">
                    <h1>No Members</h1>
                </div>

                <div data-role="content" data-theme="h" class="ui-corner-top">
                    <p>
                        Currently there are no members of this group. 
                    </p>
                    <p>
                        Members can be added in two ways.
              
                    </p>
                    <ul>
                        <li>If this groups membership is 'Open', members can log in using this app, find this group and <strong>"Join" themselves</strong> to the group.</li>
                        <li>Using the <strong>search tool provided</strong> find the person, then click the "check" icon to add them to the group.
                              
                        </li>

                    </ul>
                    <button data-theme="b" class="btnOpenAddGroupMemberPanel">Add New Member</button>
                </div>





            </div>



        </div>

        <div data-role="popup" id="sg_cantfind_members" data-overlay-theme="a" style="max-width: 400px;"
                class="ui-corner-all">
                <div data-role="header" data-theme="h" class="ui-corner-top">
                    <h1>Cant Find?</h1>
                </div>
                <div data-role="content" data-theme="a" class="ui-corner-bottom ui-content">

                    <p>
                        There are <strong>two reason</strong> why you may not be able to find the person you are looking for. 
                    </p>
                    <ol>
                        <li>If you do not have the <strong>right permissions</strong> you will not be allowed to view other peoples information. Please ask your church to add you into the right security group if you are a
                             leader in the church

                        </li>
                        <li>
                            The person you are looking <strong>may not be in the database</strong>. Simply ask that person to register with this church. Their info will then be available.
                        </li>
                    </ol>
                    

                    <a href="#" data-role="button" data-theme="h" data-rel="back">Done!</a>

                </div>
            </div>
    </div>
</body>
</html>
